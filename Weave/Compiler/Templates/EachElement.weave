@model EachElement

{{
    var flag = this.CreateVariable("_flag");
}}
{{if model.NoneBody != null}}
    bool {{= flag }};

{{/if}}
foreach (var
    {{@RenderCode model.EachBody.Expression}}
    )
{
    {{if model.NoneBody != null}}
        {{= flag }} = true;
    {{/if}}
    {{@WalkElements model.EachBody.Body}}
}

{{if model.NoneBody != null}}
    if (!{{= flag }})
    {
        {{@WalkElements model.NoneBody.Body}}
    }

{{/if}}